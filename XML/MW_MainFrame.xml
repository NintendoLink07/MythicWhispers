<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\..\FrameXML\UI.xsd">
    <Frame name="MW_MainFrame" inherits="BackdropTemplate" movable="true" registerForDrag="LeftButton" enableMouse="true" hidden="true" virtual="true" toplevel="true">
        <Layers>
            <Layer level="BACKGROUND" textureSubLevel="1">
                <Texture parentKey="Background" setAllPoints="true" />
            </Layer>
        </Layers>

        <Frames>
            <Frame parentKey="LogBox" inherits="WoWScrollBoxList" hidden="true">
                <Size x="200" />

                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" x="1" y="-20"/>
                    <Anchor point="BOTTOMLEFT" relativeKey="$parent" relativePoint="BOTTOMRIGHT" x="1"/>
                </Anchors>
                <Frames>
                    <EventFrame parentKey="ScrollBar" inherits="MinimalScrollBar">
                        <Anchors>
                            <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" />
                            <Anchor point="BOTTOMLEFT" relativeKey="$parent" relativePoint="BOTTOMRIGHT" />
                        </Anchors>
                    </EventFrame>
                </Frames>
                
                <Layers>
                    <Layer level="BACKGROUND" textureSubLevel="1">
                        <Texture parentKey="Background" setAllPoints="true" />
                    </Layer>
                </Layers>
            </Frame>

            <Button parentKey="LogButton" inherits="UIPanelButtonTemplate">
                <Size x="20" y="20"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPRIGHT" x="2"/>
                </Anchors>

                <Scripts>
                    <OnClick>

                    </OnClick>
                </Scripts>
            </Button>

            <Button parentKey="CloseButton" inherits="UIPanelCloseButton">
                <Size x="19" y="19"/>
                <Anchors>
                    <Anchor point="TOPRIGHT" relativeKey="$parent" relativePoint="TOPRIGHT" x="-2" y="-2"/>
                </Anchors>

                <Scripts>
                    <OnClick>
                        self:GetParent():Hide()
                    </OnClick>
                </Scripts>
            </Button> 
            
            <Button parentKey="Settings">
                <Size x="20" y="20"/>

                <NormalTexture atlas="GM-icon-settings" />

                <Anchors>
                    <Anchor point="RIGHT" relativeKey="$parent.CloseButton" relativePoint="LEFT" x="-1"/>
                </Anchors>

                <Scripts>
                    <OnClick>
                        MW_OpenInterfaceOptions()
                    </OnClick>
                </Scripts>
            </Button>
            
            <Button parentKey="CycleRight">
                <Size x="20" y="20"/>

                <NormalTexture atlas="wowlabs-spectatecycling-arrowright" />
                <DisabledTexture atlas="wowlabs-spectatecycling-arrowright_disabled" />

                <Anchors>
                    <Anchor point="RIGHT" relativeKey="$parent.Settings" relativePoint="LEFT" x="-1"/>
                </Anchors>

                <Scripts>
                    <OnClick>
                        if(self:GetParent().ChatButtonScrollFrame:GetHorizontalScroll() + 30 > self:GetParent().ChatButtonScrollFrame:GetHorizontalScrollRange()) then
                            self:GetParent().ChatButtonScrollFrame:SetHorizontalScroll(self:GetParent().ChatButtonScrollFrame:GetHorizontalScrollRange())

                        else
                            self:GetParent().ChatButtonScrollFrame:SetHorizontalScroll(self:GetParent().ChatButtonScrollFrame:GetHorizontalScroll() + 30)

                        end
                    </OnClick>
                </Scripts>
            </Button>
            
            <Button parentKey="CycleLeft">
                <Size x="20" y="20"/>

                <NormalTexture atlas="wowlabs-spectatecycling-arrowleft" />
                <DisabledTexture atlas="wowlabs-spectatecycling-arrowleft_disabled" />

                <Anchors>
                    <Anchor point="RIGHT" relativeKey="$parent.CycleRight" relativePoint="LEFT" x="-1"/>
                </Anchors>

                <Scripts>
                    <OnClick>
                        if(0 > self:GetParent().ChatButtonScrollFrame:GetHorizontalScroll() - 30) then
                            self:GetParent().ChatButtonScrollFrame:SetHorizontalScroll(0)

                        else
                            self:GetParent().ChatButtonScrollFrame:SetHorizontalScroll(self:GetParent().ChatButtonScrollFrame:GetHorizontalScroll() - 30)

                        end
                    </OnClick>
                </Scripts>
            </Button>
            
            <ScrollFrame parentKey="ChatButtonScrollFrame" inherits="ScrollFrameTemplate">
                <Size y="21" />
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPLEFT" x="2" y="-1"/>
                    <Anchor point="TOPRIGHT" relativeKey="$parent.CycleLeft" relativePoint="TOPLEFT" x="-2" y="-1"/>
                </Anchors>

                <ScrollChild>
                    <Frame parentKey="ChatButtonContainer" inherits="HorizontalLayoutFrame, BackdropTemplate">
                        <KeyValues>
                            <KeyValue key="fixedHeight" value="21" type="number" />
                        </KeyValues>

                        <Anchors>
                            <Anchor point="TOPLEFT" relativeKey="$parent" relativePoint="TOPLEFT" x="2" y="-1"/>
                            <Anchor point="TOPRIGHT" relativeKey="$parent.CycleLeft" relativePoint="TOPLEFT" x="-2" y="-1"/>
                        </Anchors>
                    </Frame>w
                </ScrollChild>
            </ScrollFrame>

            <EditBox parentKey="ChatBox" inherits="InputBoxTemplate" autoFocus="false" font="SystemFont_Shadow_Med1">
                <Anchors>
                    <Anchor point="BOTTOMLEFT" relativeKey="$parent" relativePoint="BOTTOMLEFT" x="6" y="1"/>
                    <Anchor point="BOTTOMRIGHT" relativeKey="$parent" relativePoint="BOTTOMRIGHT" x="-1" y="1"/>
                </Anchors>

                <Size y="20" />  
            </EditBox>

            <Frame parentKey="ScrollBox" inherits="WoWScrollBoxList">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.ChatButtonScrollFrame" relativePoint="BOTTOMLEFT" x="Â´0" y="-3"/>
                    <Anchor point="BOTTOMRIGHT" relativeKey="$parent.ChatBox" relativePoint="TOPRIGHT" x="-20" y="3"/>
                </Anchors>
            </Frame>

            <EventFrame parentKey="ScrollBar" inherits="MinimalScrollBar">
                <Anchors>
                    <Anchor point="TOPLEFT" relativeKey="$parent.ScrollBox" relativePoint="TOPRIGHT" />
                    <Anchor point="BOTTOMLEFT" relativeKey="$parent.ScrollBox" relativePoint="BOTTOMRIGHT" />
                </Anchors>
            </EventFrame>

            <EditBox parentKey="CopyBox" inherits="InputBoxTemplate" framestrata="FULLSCREEN" autoFocus="false" font="SystemFont_Shadow_Med1">
                <Size y="20" />   
                
                <Scripts>
                    <OnKeyDown>
                        if(key == "ESCAPE" or key == "ENTER") then
                            self:Hide()
                            self:ClearFocus()

                        end
                    </OnKeyDown>
                </Scripts>
            </EditBox>

            <Frame parentKey="RightClickMenu" inherits="MIOG_DropDownMenu" mixin="SlickDropDown">
                <Size x="120" y="22" />
            </Frame>
        </Frames>

        <Scripts>
            <OnDragStart>
                self:StartMoving()
            </OnDragStart>

            <OnDragStop>
                self:StopMovingOrSizing()
            </OnDragStop>
        </Scripts>
    </Frame>
</Ui>